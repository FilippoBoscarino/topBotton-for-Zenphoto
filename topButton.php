<?php
/**
 *
 * This add a styled Back to Top Button at the end of the page
 *
 * @package plugins
 * @subpackage topButton
 * @author Filippo Boscarino
 */
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Definition																																			*/
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
$plugin_is_filter=1;
$plugin_description=gettext('It adds a sticky  "Back to top" button at the right bottom of front-end pages with the ability to customize label');
$plugin_author='Filippo Boscarino';
$plugin_version='1.0.0';
$plugin_URL='http://www.boscarino.eu/application/Zenphoto/plugin';
$plugin_category=gettext('Misc');
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Controls																																				*/
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
$option_interface='topButton';
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Includes																																				*/
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Filters																																				*/
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
zp_register_filter('theme_body_open','topButton',2);

/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Class																																				*/
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
class topButton {

	function topButton() {
		setOptionDefault('button_text','Top');
	}

	function getOptionsSupported() {
		$result=array(	gettext('Enter text you want to display')=>array(	'key'	=>	'button_text',
																			'type'	=>	0,
																			'desc'	=>	gettext('Enter the text you want to see on the Zenpage.')
																		),
						);
		return $result;
	}

	function handleOption($option,$currentValue) {
	}
}
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* Function:	topButton()																																*/
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
function topButton() {
	global $_zp_gallery_page;

	$html ='<div class="topButton">'.CR_LF;
	$html.='	<a href="#top">'.getOption('button_text').'</a>'.CR_LF;
	$html.='</div>'.CR_LF;
	$html.='<script language="javascript">'.CR_LF;
	$html.='	$(\'a[href=#top]\').click(function(){'.CR_LF;
	$html.='		$(\'html, body\').animate({scrollTop:0},\'slow\');'.CR_LF;
	$html.='		return false;'.CR_LF;
	$html.='	});'.CR_LF;
	$html.='</script>'.CR_LF;

	echo $html;
}
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
/* ---------------------------------------------------------------------------------------------------------------------------------------------------- */
?>